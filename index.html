<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crystal - Personal Finance Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      html {
        font-size: 90%;
      }
      .material-symbols-filled {
        font-variation-settings: 'FILL' 1;
      }
      /* Privacy Mode Styles */
      body.privacy-mode .privacy-blur {
        filter: blur(6px);
        transition: filter 0.2s ease-in-out;
        cursor: default;
        user-select: none;
      }
      body.privacy-mode .privacy-blur:hover {
        filter: none;
        user-select: auto;
      }
      /* Loyalty card 3D helpers */
      .perspective-1000 { perspective: 1000px; }
      .transform-style-3d { transform-style: preserve-3d; }
      .backface-hidden { backface-visibility: hidden; }
    </style>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              gray: tailwind.colors.neutral,
              'primary': {
                '50': '#fef8f0',
                '100': '#fdeed9',
                '200': '#fbddb1',
                '300': '#faca89',
                '400': '#fcb045',
                '500': '#fa9a1d',
                '600': '#e78310',
                '700': '#c1670e',
                '800': '#995111',
                '900': '#7d4312',
              },
              'light-bg': '#FAFAFA',
              'light-card': 'rgba(255, 255, 255, 0.6)',
              'light-text': '#171717',
              'light-text-secondary': '#737373',
              'light-separator': 'rgba(229, 229, 229, 0.5)',
              'light-fill': 'rgba(250, 250, 250, 0.5)',

              'dark-bg': 'rgba(255, 255, 255, 0.05)',
              'dark-card': 'rgba(23, 23, 23, 0.6)',
              'dark-text': '#FFFFFF',
              'dark-text-secondary': '#A3A3A3',
              'dark-separator': 'rgba(255, 255, 255, 0.05)',
              'dark-fill': 'rgba(38, 38, 38, 0.4)',

              'semantic-red': '#FF3B30',
              'semantic-green': '#34C759',
              'semantic-yellow': '#FFCC00',
              'semantic-blue': '#007AFF',
            },
            boxShadow: {
              'card': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05)',
              'modal': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
              'neu-raised-light': '2px 2px 4px rgba(0,0,0,0.1), -2px -2px 4px rgba(255,255,255,0.8)',
              'neu-inset-light': 'inset 2px 2px 4px rgba(0,0,0,0.05), inset -2px -2px 4px rgba(255,255,255,0.5)',
              'neu-raised-dark': '2px 2px 4px rgba(0,0,0,0.5), -2px -2px 4px rgba(255,255,255,0.05)',
              'neu-inset-dark': 'inset 2px 2px 4px rgba(0,0,0,0.5), inset -2px -2px 4px rgba(255,255,255,0.05)',
            },
            borderRadius: {
              'xl': '16px',
            },
            backgroundSize: {
              '200%': '200% 100%',
            },
            animation: {
              celebrate: 'celebrate 1s ease-in-out',
              'fade-in-up': 'fadeInUp 0.2s ease-out',
              'bg-pan': 'bg-pan 3s linear infinite',
            },
            keyframes: {
              celebrate: {
                '0%, 100%': { transform: 'scale(1)' },
                '25%': { 
                  transform: 'scale(1.03)', 
                  backgroundColor: 'rgba(52, 199, 89, 0.2)'
                },
              },
              fadeInUp: {
                  'from': { opacity: 0, transform: 'translateY(10px)' },
                  'to': { opacity: 1, transform: 'translateY(0)' },
              },
              'bg-pan': {
                '0%': { backgroundPosition: '200% center' },
                '100%': { backgroundPosition: '0% center' },
              }
            }
          }
        }
      }
    </script>
    <script>
      // Apply theme from localStorage on initial load to prevent flashing
      try {
        const storedTheme = localStorage.getItem('theme');
        const prefersDark = typeof window.matchMedia === 'function' && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const shouldUseLight =
          storedTheme === 'light' ||
          (storedTheme === 'system' && !prefersDark) ||
          (!storedTheme && !prefersDark);

        document.documentElement.classList.toggle('dark', !shouldUseLight);
      } catch (error) {
        document.documentElement.classList.add('dark');
        console.warn('Unable to read theme preference from localStorage.', error);
      }
    </script>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "recharts": "https://aistudiocdn.com/recharts@^3.3.0",
    "uuid": "https://aistudiocdn.com/uuid@^13.0.0",
    "vite": "https://aistudiocdn.com/vite@^7.1.12",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.0",
    "jsonwebtoken": "https://aistudiocdn.com/jsonwebtoken@^9.0.2",
    "bcryptjs": "https://aistudiocdn.com/bcryptjs@^3.0.3",
    "cors": "https://aistudiocdn.com/cors@^2.8.5",
    "pg": "https://aistudiocdn.com/pg@^8.16.3",
    "express": "https://aistudiocdn.com/express@^5.1.0",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "process": "https://aistudiocdn.com/process@^0.11.10",
    "leaflet": "https://aistudiocdn.com/leaflet@^1.9.4",
    "react-leaflet": "https://aistudiocdn.com/react-leaflet@^5.0.0",
    "@tanstack/react-query": "https://aistudiocdn.com/@tanstack/react-query@^5.90.12"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
